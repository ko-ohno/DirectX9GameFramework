/*=============================================================================
/*-----------------------------------------------------------------------------
/*	[Camera.cpp] カメラクラス
/*	Author：Kousuke,Ohno.
/*-----------------------------------------------------------------------------
/*	説明：カメラクラス
=============================================================================*/

/*--- インクルードファイル ---*/
#include "../../../../StdAfx.h"
#include "Camera.h"
#include "../../../Math.h"
#include "../Component/CameraComponent.h"
#include "../../Renderer.h"

/*-----------------------------------------------------------------------------
/* コンストラクタ
-----------------------------------------------------------------------------*/
Camera::Camera(class Game* game)
	: GameObject(game)
{
	this->renderer_layer_type_ = RendererLayerType::Game;

	camera_component_ = NEW CameraComponent(this);

	game->GetRenderer()->AddCameraGameObject(this);
}

/*-----------------------------------------------------------------------------
/* デストラクタ
-----------------------------------------------------------------------------*/
Camera::~Camera(void)
{
	SAFE_DELETE_(camera_component_);
}

/*-----------------------------------------------------------------------------
/* ファクトリメソッド
-----------------------------------------------------------------------------*/
Camera* Camera::Create(class Game* game)
{
	return NEW Camera(game);
}

/*-----------------------------------------------------------------------------
/* 初期化処理
-----------------------------------------------------------------------------*/
bool Camera::Init(void)
{
	return true;
}

/*-----------------------------------------------------------------------------
/* 終了化処理
-----------------------------------------------------------------------------*/
void Camera::Uninit(void)
{
}

/*-----------------------------------------------------------------------------
/* ゲームオブジェクトの入力処理
-----------------------------------------------------------------------------*/
void Camera::InputGameObject(void)
{
}

/*-----------------------------------------------------------------------------
/* ゲームオブジェクトの更新処理
-----------------------------------------------------------------------------*/
void Camera::UpdateGameObject(float deltaTime)
{
	UNREFERENCED_PARAMETER(deltaTime);

	//if (false)
	//{
	//	Vector2 screen_aspect_size_ = { 0.f, 0.f };
	//	camera_component_->SetScreenAspectSize(screen_aspect_size_);
	//}

}

/*-----------------------------------------------------------------------------
/* ビュー行列の取得
-----------------------------------------------------------------------------*/
D3DXMATRIX* Camera::GetViewMatrix(void)
{
	return camera_component_->GetViewMatrix();
}

/*-----------------------------------------------------------------------------
/* 逆ビュー行列の取得
-----------------------------------------------------------------------------*/
D3DXMATRIX* Camera::GetViewInverseMatrix(void)
{
	return camera_component_->GetViewInverseMatrix();
}

/*-----------------------------------------------------------------------------
/* 2Dプロジェクション行列の取得
-----------------------------------------------------------------------------*/
D3DXMATRIX* Camera::GetProjection2DMatrix(void)
{
	return camera_component_->GetProjection2DMatrix();
}

/*-----------------------------------------------------------------------------
/* 3Dプロジェクション行列の取得
-----------------------------------------------------------------------------*/
D3DXMATRIX* Camera::GetProjection3DMatrix(void)
{
	return camera_component_->GetProjection3DMatrix();
}

/*-----------------------------------------------------------------------------
/* カメラが移動したかのフラグ
-----------------------------------------------------------------------------*/
bool Camera::IsGetCameraMoved(void) const
{
	return camera_component_->IsGetCameraMoved();
}

/*=============================================================================
/*		End of File
=============================================================================*/